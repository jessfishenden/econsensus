{% load url from future %}
{% load i18n %}

<a class="task-form cancel" href="{% url 'list_tasks' %}">{% trans 'Close' %}</a>

{% if 'internal' in object.task_manager %}{% comment %}If handling internally display an editable form{% endcomment %}
    <form class="task-form" method="POST">{% csrf_token %}
        {{ form.as_p }}
        
        <label for="id_done">{% trans 'Done' %}</label>: 
        <input id="id_done" type="checkbox" name="done" {% if object.is_done %}checked{% endif %} /> 
        <br />
        <input class="task-form button" type="submit" value="{% trans 'Update' %}" />
    </form>

{% else %}{% comment %}Else display task information and a sync option{% endcomment %}
    <form class="task-form" action="sync/">
        {% for field in form %}
            <p>
                {{ field.label_tag }}: {{ field.value }}
            </p>
        {% endfor %}
        
        <label for="id_done">{% trans 'Done' %}</label>: 
        <input id="id_done" type="checkbox" name="done" {% if object.is_done %}checked{% endif %} disabled/> 
        <br />
        <input class="task-form button" type="submit" value="{% trans 'Sync' %}" />
    </form>
{% endif %}
